# 功能

- 架构设计
- 2024-5-16
- zuiyu1998

## 概述

通过对消息时序的充分理解，需要对其中的服务进行实现。这里参考 sandcat-im，使用微服务进行设计，整体架构分为多个微服务。

## 动机

有 sandcat 在前，有目标可以参考。微服务涉及到新知识可以充分学习。

## 指南级别的解释

项目整体采用微服务架构。以 grpc 协议作为服务之间的通信。整体使用 rust 语言实现。

## 参考级别解释

后端技术选型如下:

- **Tonic**与**gRPC**：用于创建高性能的 RPC 服务，实现服务间高效通信。
- **Kafka**：作为分布式消息队列，kafka 处理大规模数据流同时保持高吞吐率。
- **PostgreSQL**与**SQLx**：我们选择了 PostgreSQL 作为关系型数据库，搭配 SQLx 实现异步数据库操作。
- **MongoDB**：作为非关系型数据库，用以处理更灵活的数据结构，及收件箱等特定功能的数据存储。
- **Redis**：作为缓存和消息中间件，实现快速数据读取和状态管理。
- **Consul**：提供服务发现和配置，保持微服务的高可用性和弹性。

## 理由和替代方案

替代方案：

- 替换 Tonic，可能有其他的 grpc 实现。
- 替换 PostgreSQL
- 替换 MongoDB
- 替换 Redis
